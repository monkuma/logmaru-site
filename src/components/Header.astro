---
import logoPng from "../assets/logo.png";
import type { Locale } from "../data/site";
import { footerLabels } from "../data/site";

interface Props {
  locale: Locale;
  enPath: string;
  jaPath: string;
}

const { locale, enPath, jaPath } = Astro.props;
const labels = footerLabels[locale];
const prefix = locale === "en" ? "" : "/ja";

const homePath = `${prefix}/`;
const downloadPath = `${prefix}/download`;
const changelogPath = `${prefix}/changelog`;
const contactPath = `${prefix}/contact`;
---

<header class="site-header">
  <div class="container header-inner">
    <a class="logo-link" href={homePath} aria-label="LogMaru home">
      <img src={logoPng.src} alt="LogMaru" class="logo-mark" />
    </a>

    <div class="header-right">
      <nav class="main-nav" aria-label="Main navigation">
        <a href={downloadPath}>{labels.download}</a>
        <a href={changelogPath}>{labels.changelog}</a>
        <a href={contactPath}>{labels.contact}</a>
      </nav>

      <nav class="lang-switch" aria-label="Language switch">
        <a href={enPath} aria-current={locale === "en" ? "page" : undefined}>EN</a>
        <span>/</span>
        <a href={jaPath} aria-current={locale === "ja" ? "page" : undefined}>JA</a>
      </nav>
    </div>
  </div>
</header>

<style>
  .site-header {
    padding: 0.8rem 0;
    border-bottom: 1px solid rgba(51, 49, 47, 0.1);
  }

  .header-inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.8rem;
  }

  .logo-link {
    display: inline-flex;
    align-items: center;
    color: inherit;
    text-decoration: none;
  }

  .logo-mark {
    height: 28px;
    width: auto;
    display: block;
  }

  .header-right {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .main-nav {
    display: inline-flex;
    align-items: center;
    gap: 0.9rem;
  }

  .main-nav a {
    color: var(--text);
    text-decoration: none;
    font-size: 0.92rem;
  }

  .main-nav a:hover {
    text-decoration: underline;
  }

  .lang-switch {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.92rem;
  }

  .lang-switch a {
    color: var(--text);
    text-decoration: none;
    opacity: 0.75;
  }

  .lang-switch a[aria-current="page"] {
    opacity: 1;
    font-weight: 700;
    text-decoration: underline;
    text-underline-offset: 0.2em;
  }

  @media (max-width: 780px) {
    .header-right {
      gap: 0.85rem;
    }

    .main-nav {
      display: none;
    }
  }
</style>
