---
import BaseLayout from "../../layouts/BaseLayout.astro";
import {
  appName,
  authorGithub,
  authorName,
  contactEmail,
  githubIssues
} from "../../data/site";
import { buildAbsoluteUrl } from "../../lib/seo";

const siteUrl = import.meta.env.PUBLIC_SITE_URL || Astro.site?.toString();

if (!siteUrl) {
  throw new Error("PUBLIC_SITE_URL must be configured.");
}

const structuredData = {
  "@context": "https://schema.org",
  "@type": "ContactPage",
  name: `${appName} お問い合わせ`,
  url: buildAbsoluteUrl(siteUrl, "/ja/contact/"),
  inLanguage: "ja",
  mainEntity: {
    "@type": "Organization",
    name: appName,
    email: contactEmail,
    url: buildAbsoluteUrl(siteUrl, "/ja/"),
    sameAs: [authorGithub, githubIssues],
    founder: {
      "@type": "Person",
      name: authorName,
      url: authorGithub,
      sameAs: [authorGithub]
    }
  },
  author: {
    "@type": "Person",
    name: authorName,
    url: authorGithub,
    sameAs: [authorGithub]
  }
};
---

<BaseLayout
  locale="ja"
  title="LogMaru お問い合わせ | Windows時間記録アプリのサポート窓口"
  description="LogMaru へのお問い合わせ先です。ご質問・不具合報告・ご要望をお送りいただけます。"
  structuredData={structuredData}
>
  <h1 class="page-title contact-title">お問い合わせ</h1>
  <section class="contact-wrap" aria-label="お問い合わせ方法">
    <article class="contact-card card">
      <h2 class="contact-heading">ご連絡方法</h2>
      <p class="contact-note muted">
        ご質問・不具合報告・ご要望など、お気軽にお知らせください。
      </p>
      <dl class="contact-list">
        <div class="contact-row">
          <dt>メール</dt>
          <dd><a href={`mailto:${contactEmail}`}>{contactEmail}</a></dd>
        </div>
        <div class="contact-row">
          <dt>GitHub Issues</dt>
          <dd>
            <a href={githubIssues} target="_blank" rel="noreferrer">
              {githubIssues}
            </a>
          </dd>
        </div>
      </dl>
      <div class="contact-form-wrap">
        <iframe
          class="contact-form-embed"
          src="https://docs.google.com/forms/d/e/1FAIpQLSdrJUCbsBLqXN6Wo7hn7HciMYpUEMXP00y4I395ChnihPmb1Q/viewform?embedded=true"
          width="640"
          height="781"
          frameborder="0"
          marginheight="0"
          marginwidth="0"
          title="LogMaru お問い合わせフォーム"
        >読み込んでいます…</iframe>
      </div>
    </article>
  </section>
</BaseLayout>
