---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { appName } from "../../data/site";
import { getLatestRelease } from "../../lib/releases";
import { buildAbsoluteUrl } from "../../lib/seo";
import downloadPagePng from "../../assets/download-page.png";
import theSetupFilePng from "../../assets/the-setup-file.png";
import wizardPng from "../../assets/wizard.png";
import jaLogsLightPng from "../../assets/ja-logs-light.png";
import jsCategoriesLightPng from "../../assets/js-categories-light.png";
import jaAddCategoryPng from "../../assets/ja-add-category.png";
import jaCheckCategorySummaryPng from "../../assets/ja-check-cat-summary.png";

const latestRelease = await getLatestRelease("ja");
const siteUrl = import.meta.env.PUBLIC_SITE_URL || Astro.site?.toString();

if (!siteUrl) {
  throw new Error("PUBLIC_SITE_URL must be configured.");
}

const structuredData = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  name: appName,
  url: buildAbsoluteUrl(siteUrl, "/ja/"),
  inLanguage: "ja",
};
---

<BaseLayout
  locale="ja"
  title={`${appName} Windows時間記録アプリ | ローカル保存の作業ログ可視化ツール`}
  description="LogMaru は作業ログを自動で記録し、時間の使い方を可視化するローカル保存型の Windows アプリです。"
  structuredData={structuredData}
>
  <section class="section hero hero-split">
    <div class="hero-copy">
      <p class="hero-logo">{appName}</p>
      <h1 class="hero-title">
        <span>今日、何してたっけ？</span>
      </h1>
      <h2>
        仕事終わりに思い出せない。会議で聞かれて詰まる。日報が空白になる。
      </h2>
      <h2>LogMaruは、あなたの作業の記憶を自動で記録します。</h2>
      <p>
        LogMaru はアクティブなウィンドウを自動で記録し、作業ログを保存します。
        記録はカテゴリごとに分けて管理でき、作業ごとの使用時間を確認できます。
      </p>
    </div>
    <div class="hero-action">
      <a class="button" href="/ja/download">
        <svg class="windows-icon" viewBox="0 0 24 24" aria-hidden="true">
          <path
            d="M2.5 3.6 10.9 2.4v8.4H2.5V3.6Zm9.6-1.4L21.5 1v9.8h-9.4V2.2ZM2.5 12.2h8.4v8.4L2.5 19.4v-7.2Zm9.6 0h9.4V23l-9.4-1.2v-9.6Z"
          ></path>
        </svg>
        <span>Windows版をダウンロード</span>
      </a>
      <p class="muted">最新: {latestRelease.version}</p>
    </div>
  </section>

  <section class="section screenshot-wrap">
    <div
      class="screenshot-frame"
      role="img"
      aria-label="LogMaru アプリのスクリーンショット"
    >
      <div class="screenshot-stack">
        <img
          class="screenshot-image"
          src={jaLogsLightPng.src}
          alt="LogMaru ログ画面"
          loading="lazy"
        />
        <img
          class="screenshot-image"
          src={jsCategoriesLightPng.src}
          alt="LogMaru カテゴリ画面"
          loading="lazy"
        />
      </div>
    </div>
  </section>

  <section class="section">
    <h2 class="features-title">主な機能</h2>
    <ul class="features-list">
      <li class="feature">
        <h3>データはあなたのPCだけに</h3>
        <p>
          記録はすべてローカル保存。クラウド送信はありません。
          仕事の内容が外に出ることはありません。
        </p>
      </li>

      <li class="feature">
        <h3>時間の使い方が一目でわかる</h3>
        <p>
          アプリや作業をカテゴリごとに整理。
          今日どこに時間を使ったのか、はっきり見えます。
        </p>
      </li>

      <li class="feature">
        <h3>1日の流れをそのまま振り返る</h3>
        <p>
          時系列で活動を表示。
          「なんとなく忙しかった」を具体的な記録に変えます。
        </p>
      </li>
    </ul>
  </section>

  <section class="section simple-steps">
    <h2>インストール方法</h2>
    <ol class="step-list">
      <li class="step-row">
        <div class="step-image-placeholder">
          <img
            class="step-image"
            src={downloadPagePng.src}
            alt="ダウンロードページのスクリーンショット"
            loading="lazy"
          />
        </div>
        <div class="step-meta">
          <p class="step-number">Step 1</p>
          <h3>インストーラーをダウンロード</h3>
          <p>
            <a href="/ja/download"
              >ダウンロードページから最新バージョンを取得します。</a
            >
          </p>
        </div>
      </li>
      <li class="step-row">
        <div class="step-image-placeholder">
          <img
            class="step-image"
            src={theSetupFilePng.src}
            alt="セットアップファイル実行画面のスクリーンショット"
            loading="lazy"
          />
        </div>
        <div class="step-meta">
          <p class="step-number">Step 2</p>
          <h3>セットアップファイルを実行</h3>
          <p>インストーラーをダブルクリックしてセットアップを開始します。</p>
        </div>
      </li>
      <li class="step-row">
        <div class="step-image-placeholder">
          <img
            class="step-image"
            src={wizardPng.src}
            alt="セットアップウィザードのスクリーンショット"
            loading="lazy"
          />
        </div>
        <div class="step-meta">
          <p class="step-number">Step 3</p>
          <h3>ウィザードに沿って完了</h3>
          <p>
            画面の案内に従ってインストールを完了します。<br />
            ※ Windowsで「PCが保護されました」という画面が表示された場合は、
            「詳細情報」→「実行」を選択して続行してください。
          </p>
        </div>
      </li>
    </ol>
  </section>

  <section class="section simple-steps">
    <h2>使い方</h2>
    <ol class="step-list">
      <li class="step-row">
        <div class="step-image-placeholder">
          <img
            class="step-image"
            src={jaLogsLightPng.src}
            alt="作業ログ画面"
            loading="lazy"
          />
        </div>
        <div class="step-meta">
          <p class="step-number">Step 1</p>
          <h3>作業を自動で記録</h3>
          <p>アクティブなウィンドウを自動で記録します。</p>
        </div>
      </li>
      <li class="step-row">
        <div class="step-image-placeholder">
          <img
            class="step-image"
            src={jaAddCategoryPng.src}
            alt="カテゴリ追加画面"
            loading="lazy"
          />
        </div>
        <div class="step-meta">
          <p class="step-number">Step 2</p>
          <h3>カテゴリを割り当て</h3>
          <p>記録した作業をカテゴリ別に整理します。</p>
        </div>
      </li>
      <li class="step-row">
        <div class="step-image-placeholder">
          <img
            class="step-image"
            src={jaCheckCategorySummaryPng.src}
            alt="カテゴリ集計画面"
            loading="lazy"
          />
        </div>
        <div class="step-meta">
          <p class="step-number">Step 3</p>
          <h3>タイムラインを確認</h3>
          <p>作業ごとの時間配分を振り返れます。</p>
        </div>
      </li>
    </ol>
  </section>
</BaseLayout>
