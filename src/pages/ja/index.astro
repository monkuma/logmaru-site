---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { appName } from "../../data/site";
import { getLatestRelease } from "../../lib/releases";
import { buildAbsoluteUrl } from "../../lib/seo";

const latestRelease = await getLatestRelease("ja");
const siteUrl = import.meta.env.PUBLIC_SITE_URL || Astro.site?.toString();

if (!siteUrl) {
  throw new Error("PUBLIC_SITE_URL must be configured.");
}

const structuredData = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  name: appName,
  url: buildAbsoluteUrl(siteUrl, "/ja/"),
  inLanguage: "ja"
};
---

<BaseLayout locale="ja" title={`${appName} | ホーム`} structuredData={structuredData}>
  <section class="section hero">
    <p class="hero-logo">{appName}</p>
    <h1 class="hero-title">
      <span>PCで使ったアプリと時間を</span>
      <span>自動で記録</span>
    </h1>
    <p>
      LogMaru はアクティブなウィンドウを自動で記録し、アプリ名とタイトルを保存します。
      記録はカテゴリごとに分けて管理でき、作業ごとの使用時間を確認できます。
    </p>
    <a class="button" href="/ja/download">
      <svg class="windows-icon" viewBox="0 0 24 24" aria-hidden="true">
        <path
          d="M2.5 3.6 10.9 2.4v8.4H2.5V3.6Zm9.6-1.4L21.5 1v9.8h-9.4V2.2ZM2.5 12.2h8.4v8.4L2.5 19.4v-7.2Zm9.6 0h9.4V23l-9.4-1.2v-9.6Z"
        />
      </svg>
      <span>Windows版をダウンロード</span>
    </a>
    <p class="muted">最新: {latestRelease.version}</p>
  </section>

  <section class="section screenshot-wrap">
    <div class="screenshot-frame" role="img" aria-label="LogMaru アプリのスクリーンショット">
      <p>スクリーンショット表示エリア</p>
    </div>
  </section>

  <section class="section">
    <h2 class="features-title">主な機能</h2>
    <ul class="features-list">
      <li class="feature">
        <h3>ローカル保存</h3>
        <p>記録データは端末内に保存されます。</p>
      </li>
      <li class="feature">
        <h3>カテゴリ別ログ</h3>
        <p>作業内容を分類して、見返しやすく整理できます。</p>
      </li>
      <li class="feature">
        <h3>明確な活動履歴</h3>
        <p>時系列の履歴で日々の動きを把握できます。</p>
      </li>
    </ul>
  </section>

  <section class="section simple-steps">
    <h2>インストール方法 / Installation</h2>
    <ol class="step-list">
      <li class="step-row">
        <div class="step-image-placeholder">Image Placeholder</div>
        <div class="step-meta">
          <p class="step-number">Step 1</p>
          <h3>Download the installer</h3>
          <p>Download the latest version from the official site.</p>
        </div>
      </li>
      <li class="step-row">
        <div class="step-image-placeholder">Image Placeholder</div>
        <div class="step-meta">
          <p class="step-number">Step 2</p>
          <h3>Run the setup file</h3>
          <p>Double-click the installer and start the setup process.</p>
        </div>
      </li>
      <li class="step-row">
        <div class="step-image-placeholder">Image Placeholder</div>
        <div class="step-meta">
          <p class="step-number">Step 3</p>
          <h3>Follow the setup wizard</h3>
          <p>
            Complete the installation by following the on-screen instructions.
          </p>
        </div>
      </li>
    </ol>
  </section>

  <section class="section simple-steps">
    <h2>使い方 / How to Use</h2>
    <ol class="step-list">
      <li class="step-row">
        <div class="step-image-placeholder">Image Placeholder</div>
        <div class="step-meta">
          <p class="step-number">Step 1</p>
          <h3>Record activity automatically</h3>
          <p>LogMaru automatically records your active windows.</p>
        </div>
      </li>
      <li class="step-row">
        <div class="step-image-placeholder">Image Placeholder</div>
        <div class="step-meta">
          <p class="step-number">Step 2</p>
          <h3>Assign categories</h3>
          <p>Group your activities into categories.</p>
        </div>
      </li>
      <li class="step-row">
        <div class="step-image-placeholder">Image Placeholder</div>
        <div class="step-meta">
          <p class="step-number">Step 3</p>
          <h3>Review your timeline</h3>
          <p>Check how much time you spent on each task.</p>
        </div>
      </li>
    </ol>
  </section>
</BaseLayout>
