---
import BaseLayout from "../layouts/BaseLayout.astro";
import { appName } from "../data/site";
import { getLatestRelease } from "../lib/releases";
import { buildAbsoluteUrl } from "../lib/seo";
import downloadPagePng from "../assets/download-page.png";
import setupFilePng from "../assets/the-setup-file.png";
import wizardPng from "../assets/wizard.png";
import enLogsLightHeroPng from "../assets/en-logs-light.png";
import enCategoriesLightPng from "../assets/en-categories-light.png";
import enAddCategoryPng from "../assets/en-add-category.png";
import enCheckCategorySummaryPng from "../assets/en-check-cat-summary.png";

const latestRelease = await getLatestRelease("en");
const siteUrl = import.meta.env.PUBLIC_SITE_URL || Astro.site?.toString();

if (!siteUrl) {
  throw new Error("PUBLIC_SITE_URL must be configured.");
}

const structuredData = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  name: appName,
  url: buildAbsoluteUrl(siteUrl, "/"),
  inLanguage: "en",
};
---

<BaseLayout
  locale="en"
  title="LogMaru Time Tracking App for Windows | Local-First Logs"
  description="LogMaru is a local-first Windows app that automatically records your work activity and shows where your time went."
  structuredData={structuredData}
>
  <section class="section hero">
    <p class="hero-logo">{appName}</p>
    <h1 class="hero-title">
      <span>What did I do today?</span>
    </h1>

    <h2>You worked all day. But you can’t explain where the time went.</h2>

    <p>LogMaru automatically keeps a record of your work.</p>
    <a class="button" href="/download">
      <svg class="windows-icon" viewBox="0 0 24 24" aria-hidden="true">
        <path
          d="M2.5 3.6 10.9 2.4v8.4H2.5V3.6Zm9.6-1.4L21.5 1v9.8h-9.4V2.2ZM2.5 12.2h8.4v8.4L2.5 19.4v-7.2Zm9.6 0h9.4V23l-9.4-1.2v-9.6Z"
        ></path>
      </svg>
      <span>Download for Windows</span>
    </a>
    <p class="muted">Latest: {latestRelease.version}</p>
  </section>

  <section class="section screenshot-wrap">
    <div
      class="screenshot-frame"
      role="img"
      aria-label="LogMaru app screenshots"
    >
      <div class="screenshot-stack">
        <img
          class="screenshot-image"
          src={enLogsLightHeroPng.src}
          width={enLogsLightHeroPng.width}
          height={enLogsLightHeroPng.height}
          alt="LogMaru logs screen"
          loading="eager"
          fetchpriority="high"
        />
        <img
          class="screenshot-image"
          src={enCategoriesLightPng.src}
          width={enCategoriesLightPng.width}
          height={enCategoriesLightPng.height}
          alt="LogMaru categories screen"
          loading="eager"
        />
      </div>
    </div>
  </section>

  <section class="section">
    <h2 class="features-title">What you get with LogMaru</h2>

    <ul class="features-list">
      <li class="feature">
        <h3>Your data stays on your PC</h3>
        <p>
          All records are stored locally. Nothing is sent to the cloud. Your
          work activity remains private.
        </p>
      </li>

      <li class="feature">
        <h3>See where your time actually went</h3>
        <p>
          Organize apps and activities into categories. Instantly understand how
          you spent your day.
        </p>
      </li>

      <li class="feature">
        <h3>Replay your day as a timeline</h3>
        <p>
          View your activity in chronological order. Turn a vague “busy day”
          into a clear record.
        </p>
      </li>
    </ul>
  </section>

  <section class="section simple-steps">
    <h2>Installation</h2>
    <ol class="step-list">
      <li class="step-row">
        <div class="step-image-placeholder">
          <img
            class="step-image"
            src={downloadPagePng.src}
            width={downloadPagePng.width}
            height={downloadPagePng.height}
            alt="Download page screenshot"
            loading="lazy"
          />
        </div>
        <div class="step-meta">
          <p class="step-number">Step 1</p>
          <h3>Download the installer</h3>
          <p>
            <a href="/download"
              >Download the latest version from the official site.</a
            >
          </p>
        </div>
      </li>
      <li class="step-row">
        <div class="step-image-placeholder">
          <img
            class="step-image"
            src={setupFilePng.src}
            width={setupFilePng.width}
            height={setupFilePng.height}
            alt="Run the setup file screenshot"
            loading="lazy"
          />
        </div>
        <div class="step-meta">
          <p class="step-number">Step 2</p>
          <h3>Run the setup file</h3>
          <p>Double-click the installer and start the setup process.</p>
        </div>
      </li>
      <li class="step-row">
        <div class="step-image-placeholder">
          <img
            class="step-image"
            src={wizardPng.src}
            width={wizardPng.width}
            height={wizardPng.height}
            alt="Setup wizard screenshot"
            loading="lazy"
          />
        </div>
        <div class="step-meta">
          <p class="step-number">Step 3</p>
          <h3>Follow the setup wizard</h3>
          <p>
            Complete the installation by following the on-screen instructions.<br
            />
            If Windows shows a “Windows protected your PC” message, click “More info”
            and then “Run anyway” to continue.
          </p>
        </div>
      </li>
    </ol>
  </section>

  <section class="section simple-steps">
    <h2>How to Use</h2>
    <ol class="step-list">
      <li class="step-row">
        <div class="step-image-placeholder">
          <img
            class="step-image"
            src={enLogsLightHeroPng.src}
            width={enLogsLightHeroPng.width}
            height={enLogsLightHeroPng.height}
            alt="Activity log screen"
            loading="lazy"
          />
        </div>
        <div class="step-meta">
          <p class="step-number">Step 1</p>
          <h3>Record activity automatically</h3>
          <p>LogMaru automatically records your active windows.</p>
        </div>
      </li>
      <li class="step-row">
        <div class="step-image-placeholder">
          <img
            class="step-image"
            src={enAddCategoryPng.src}
            width={enAddCategoryPng.width}
            height={enAddCategoryPng.height}
            alt="Assign categories screen"
            loading="lazy"
          />
        </div>
        <div class="step-meta">
          <p class="step-number">Step 2</p>
          <h3>Assign categories</h3>
          <p>Group your activities into categories.</p>
        </div>
      </li>
      <li class="step-row">
        <div class="step-image-placeholder">
          <img
            class="step-image"
            src={enCheckCategorySummaryPng.src}
            width={enCheckCategorySummaryPng.width}
            height={enCheckCategorySummaryPng.height}
            alt="Category summary screen"
            loading="lazy"
          />
        </div>
        <div class="step-meta">
          <p class="step-number">Step 3</p>
          <h3>Review your timeline</h3>
          <p>Check how much time you spent on each task.</p>
        </div>
      </li>
    </ol>
  </section>
</BaseLayout>
