---
import BaseLayout from "../layouts/BaseLayout.astro";
import { appName, contactEmail, githubIssues } from "../data/site";
import { buildAbsoluteUrl } from "../lib/seo";

const siteUrl = import.meta.env.PUBLIC_SITE_URL || Astro.site?.toString();

if (!siteUrl) {
  throw new Error("PUBLIC_SITE_URL must be configured.");
}

const structuredData = {
  "@context": "https://schema.org",
  "@type": "ContactPage",
  name: `${appName} Contact`,
  url: buildAbsoluteUrl(siteUrl, "/contact/"),
  inLanguage: "en",
  mainEntity: {
    "@type": "Organization",
    name: appName,
    email: contactEmail,
    url: buildAbsoluteUrl(siteUrl, "/"),
    sameAs: [githubIssues]
  }
};
---

<BaseLayout
  locale="en"
  title="LogMaru | Contact"
  description="Contact LogMaru support for questions, bug reports, and feedback."
  structuredData={structuredData}
>
  <h1 class="page-title contact-title">Contact</h1>
  <section class="contact-wrap" aria-label="Contact methods">
    <article class="contact-card card">
      <h2 class="contact-heading">Get in touch</h2>
      <p class="contact-note muted">
        Questions, bug reports, and feedback are welcome.
      </p>
      <dl class="contact-list">
        <div class="contact-row">
          <dt>Email</dt>
          <dd><a href={`mailto:${contactEmail}`}>{contactEmail}</a></dd>
        </div>
        <div class="contact-row">
          <dt>GitHub Issues</dt>
          <dd>
            <a href={githubIssues} target="_blank" rel="noreferrer">
              {githubIssues}
            </a>
          </dd>
        </div>
      </dl>
      <div class="contact-form-wrap">
        <iframe
          class="contact-form-embed"
          src="https://docs.google.com/forms/d/e/1FAIpQLSdrJUCbsBLqXN6Wo7hn7HciMYpUEMXP00y4I395ChnihPmb1Q/viewform?embedded=true"
          width="640"
          height="781"
          frameborder="0"
          marginheight="0"
          marginwidth="0"
          title="LogMaru contact form"
        >Loadingâ€¦</iframe>
      </div>
    </article>
  </section>
</BaseLayout>
